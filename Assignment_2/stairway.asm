.ORIG x3000
getp
REG
LD R3, STONE

LD R4, STAIRS_WIDTH
LD R5, STAIRS_HEIGHT
LD R6, STAIRS_LENGTH
REG
ST R4, TEMP_WIDTH
ST R5, TEMP_HEIGHT
ST R6, TEMP_LENGTH

ADD R2, R2, #1
ADD R0, R0, #1

HEIGHT_LOOP
LD R4, TEMP_WIDTH

ROW_LOOP
LD R6, TEMP_LENGTH

BLOCK_LOOP
JSR PLACE_BLOCK
ADD R6, R6, #-1
BRP BLOCK_LOOP

LD R6, TEMP_LENGTH
NOT R6, R6
ADD R6, R6, #1
ADD R2, R2, R6
ADD R0, R0, #1

ADD R4, R4, #-1
BRP ROW_LOOP

ADD R5, R5, #-1
BRz END_PROGRAM

LD R6, TEMP_LENGTH

ADD R6, R6, #-1
ST R6, TEMP_LENGTH
ADD R1,R1, #1
LD R4, TEMP_WIDTH  
NOT R4, R4  
ADD R4, R4, #1  
ADD R0, R0, R4  
ADD R2,R2, #1

BR HEIGHT_LOOP

END_PROGRAM
HALT


PLACE_BLOCK
SETB
ADD R2, R2, #1
reg
RET

STAIRS_WIDTH .FILL #2
STAIRS_LENGTH .FILL #5
STAIRS_HEIGHT .FILL #3
STONE .FILL #1

TEMP_WIDTH    .BLKW 1
TEMP_HEIGHT   .BLKW 1
TEMP_LENGTH   .BLKW 1
.END