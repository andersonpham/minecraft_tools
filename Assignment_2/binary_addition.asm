.ORIG x3000
getp
REG
LD R3, STONE

ADD R0, R0, #1
SETB
ADD R0, R0, #2
SETB
ADD R0, R0, #3
SETB
ADD R0, R0, #1
SETB
ADD R0, R0, #1
SETB


ADD R2, R2, #1
ADD R0, R0, #-7
SETB
ADD R0, R0, #3
SETB
ADD R0, R0, #2
SETB
ADD R0, R0, #3
SETB

ADD R2, R2, #-1
ADD R0, R0, #7
LD R4, BIT_LENGTH
AND R5, R5, #0

FIRST_NUMBER
GETB
ADD R5, R5, R5
ADD R3, R3, #0
REG
BRZ AIR1
ADD R5, R5, #1

REG

AIR1
ADD R0, R0, #-1
ADD R4, R4, #-1
BRP FIRST_NUMBER

ADD R2, R2, #1
ADD R0, R0, #15
ADD R0, R0, #1

LD R4, BIT_LENGTH
AND R6, R6, #0
REG
ST R5, TEMP1

SECOND_NUMBER
GETB
ADD R6, R6, R6
ADD R3, R3, #0
REG
BRZ AIR2
ADD R6, R6, #1
REG


AIR2
ADD R0, R0, #-1
ADD R4, R4, #-1
BRP SECOND_NUMBER
ST R6, TEMP2

ADD R7, R5, R6
REG
ST R7, FINAL
LD R4, BIT_LENGTH
ADD R2, R2, #1
ADD R0,R0, #1
AND R5,R5, #0
AND R6,R6, #0

SUM
ADD R4,R4, #0
BRZ DONE
AND R3, R7, #1
REG
BRZ PLACE_AIR
SETB
PLACE_AIR
AND R5, R5, #0
ADD R0,R0,#1

REM_RT_NUM
ADD R6, R7, #-2

BRN DIV_DONE
ADD R7, R6, #0
ADD R5, R5, #1
BR REM_RT_NUM

DIV_DONE
ADD R7, R5, #0

ADD R4,R4, #-1
BRnzp SUM

DONE 
HALT



HALT
STONE .fill #1
BIT_LENGTH .FILL #16
TEMP1 .BLKW 1
TEMP2 .BLKW 1
FINAL .BLKW 1
.END